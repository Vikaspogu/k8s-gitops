---
version: "3"

tasks:

  init:
    desc: Initialize terraform dependencies
    dir: provision/terraform/cloudflare
    cmds:
      - terraform init {{.CLI_ARGS}}

  plan:
    desc: Show the changes terraform will make
    dir: provision/terraform/cloudflare
    cmds:
      - terraform plan {{.CLI_ARGS}}

  apply:
    desc: Apply the changes to Cloudflare
    dir: provision/terraform/cloudflare
    cmds:
      - terraform apply {{.CLI_ARGS}}

  init:proxmox-00-vm:
    desc: Initialize terraform
    dir: provision/terraform/proxmox/00-vm
    cmds:
      - "terraform init"

  plan:proxmox-00-vm:
    desc: Plan for 00-vm
    dir: provision/terraform/proxmox/00-vm
    cmds:
      - "terraform plan"

  apply:proxmox-00-vm:
    desc: Apply for 00-vm
    dir: provision/terraform/proxmox/00-vm
    cmds:
      - "terraform apply"
